(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{352:function(t,e,r){"use strict";var n=r(61),o=r.n(n),l="YYYY-MM-DD HH:mm:ss",c=function(){return o()().format(l)};e.a=function(t,e,r){return 1===t&&e?o()().startOf("day").format(l):1===t&&r?c():2===t&&e?o()().add(-1,"day").startOf("day").format(l):2===t&&r?o()().add(-1,"day").endOf("day").format(l):3===t&&e?o()().startOf("week").format(l):3===t&&r?o()().endOf("week").format(l):4===t&&e?o()().subtract(1,"weeks").startOf("week").format(l):4===t&&r?o()().subtract(1,"weeks").endOf("week").format(l):5===t&&e?o()().startOf("month").format(l):5===t&&r?o()().endOf("month").format(l):6===t&&e?o()().subtract(1,"month").startOf("month").format(l):6===t&&r?o()().subtract(1,"month").endOf("month").format(l):7===t&&e?o()().startOf("year").format(l):7===t&&r?c():8===t&&e?o()().subtract(1,"year").startOf("year").format(l):8===t&&r?o()().subtract(1,"year").endOf("year").format(l):void 0}},354:function(t,e,r){"use strict";var n=r(18),o=(r(52),r(11)),l=(r(10),r(101),r(135),{props:{title:{required:!0,type:String},isAgent:{required:!1,type:Boolean},baseList:{required:!0,type:Array},selectedList:{required:!0,type:Array}},data:function(){return{baseValue:"",selectedValue:""}},computed:{baseListLocal:{get:function(){return this.baseList},set:function(t){this.$emit("updateBase",t)}},selectedListLocal:{get:function(){return this.selectedList},set:function(t){this.$emit("updateSelected",t)}},filteredBase:function(){var t=this;return this.baseListLocal.filter(function(e){return t.isAgent?e.enterpriseName.toLowerCase().includes(t.baseValue.toLowerCase()):e.name.toLowerCase().includes(t.baseValue.toLowerCase())})},filteredSelected:function(){var t=this;return this.selectedListLocal.filter(function(e){return t.isAgent?e.enterpriseName.toLowerCase().includes(t.selectedValue.toLowerCase()):e.name.toLowerCase().includes(t.selectedValue.toLowerCase())})}},methods:{addAll:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,[].concat(Object(n.a)(this.selectedListLocal),Object(n.a)(this.filteredBase));case 2:this.selectedListLocal=t.sent,this.baseListLocal=this.baseListLocal.filter(function(t){return!e.filteredBase.includes(t)}),this.baseValue="";case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),transferToRight:function(t){this.baseListLocal=this.baseListLocal.filter(function(e){return e.id!==t.id}),this.selectedListLocal=[].concat(Object(n.a)(this.selectedListLocal),[t])},transferToLeft:function(t){this.selectedListLocal=this.selectedList.filter(function(e){return e.id!==t.id}),this.baseListLocal=[].concat(Object(n.a)(this.baseList),[t])},removeAll:function(){this.baseListLocal=[].concat(Object(n.a)(this.baseListLocal),Object(n.a)(this.selectedListLocal)),this.selectedListLocal=[]}}}),c=r(6),component=Object(c.a)(l,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"duallist"},[r("h6",{staticClass:"duallist-title m-0 pb-0 white"},[t._v(t._s(t.title))]),t._v(" "),r("div",{staticClass:"duallist-box"},[r("div",{staticClass:"duallist-box-border duallist-box-border-first"},[r("div",{staticClass:"duallist-box-search"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.baseValue,expression:"baseValue"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search"},domProps:{value:t.baseValue},on:{input:function(e){e.target.composing||(t.baseValue=e.target.value)}}})]),t._v(" "),t.filteredBase.length?r("ul",{staticClass:"list-group",attrs:{name:"list-item"}},t._l(t.filteredBase,function(b){return r("li",{key:b.id,staticClass:"list-group-item",on:{click:function(e){return t.transferToRight(b)}}},[t._v("\n          "+t._s(t.isAgent?b.enterpriseName:b.name)+"\n        ")])}),0):t._e()]),t._v(" "),r("transition",{attrs:{name:"fade"}},[t.filteredBase.length?r("div",{staticClass:"btn-wrapper"},[r("a",{staticClass:"btn-move",on:{click:t.addAll}})]):t._e()])],1),t._v(" "),r("div",{staticClass:"duallist-box"},[r("div",{staticClass:"duallist-box-border duallist-box-border"},[r("div",{staticClass:"duallist-box-search"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedValue,expression:"selectedValue"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search"},domProps:{value:t.selectedValue},on:{input:function(e){e.target.composing||(t.selectedValue=e.target.value)}}})]),t._v(" "),t.filteredSelected.length?r("ul",{staticClass:"list-group",attrs:{name:"list-item"}},t._l(t.filteredSelected,function(b){return r("li",{key:b.id,staticClass:"list-group-item selected",on:{click:function(e){return t.transferToLeft(b)}}},[t._v("\n          "+t._s(t.isAgent?b.enterpriseName:b.name)+"\n        ")])}),0):t._e()]),t._v(" "),r("transition",{attrs:{name:"fade"}},[t.filteredSelected.length?r("div",{staticClass:"btn-wrapper"},[r("a",{staticClass:"btn-empty",on:{click:t.removeAll}})]):t._e()])],1)])},[],!1,null,null,null);e.a=component.exports},355:function(t,e,r){"use strict";r(60),r(203);var n=r(0),o=r(26),l=r(354),c=r(352),d={components:{DuallistBox:l.a},props:{item:{required:!0,type:Object},isVisibleItem:{required:!1,default:function(){return{}},type:Object},showFooter:{required:!0,type:Boolean},isSearchable:{required:!0,type:Boolean},url:{required:!1,default:null,type:String}},data:function(){return{dateRanges:[{id:1,name:"Today"},{id:2,name:"Yesterday"},{id:3,name:"This Week"},{id:4,name:"Last Week"},{id:5,name:"This Month"},{id:6,name:"Last Month"},{id:7,name:"Year To Date"},{id:8,name:"Last Year"}],relativeDate:!0,selectedDate:null}},computed:Object(n.a)({},Object(o.d)("shared",["callTypes","skills","teams","queues","agents"]),{yearRange:function(){var t=this.$moment().subtract(5,"years"),e=this.$moment.range(t,new Date);return Array.from(e.by("year")).map(function(t){return t.format("YYYY")})},optionsAgents:function(){var t=this;return{hasFilter:this.agents.filter(function(e){return!t.item.agents.some(function(t){return t.id===e.id})}),baseList:this.agents,selectedList:[],title:"Agents"}},optionsCallTypes:function(){var t=this;return{hasFilter:this.callTypes.filter(function(e){return!t.item.callTypes.some(function(t){return t.id===e.id})}),baseList:this.callTypes,selectedList:[],title:"Call Types"}},optionsSkills:function(){return{baseList:this.skills,selectedList:[],title:"Skills"}},optionsQueues:function(){var t=this;return{hasFilter:this.queues.filter(function(e){return!t.item.queues.some(function(t){return t.id===e.id})}),baseList:this.queues,selectedList:[],title:"Precision Queue"}},optionsTeams:function(){var t=this;return{hasFilter:this.teams.filter(function(e){return!t.item.teams.some(function(t){return t.id===e.id})}),baseList:this.teams,selectedList:[],title:"Teams"}}}),watch:{item:function(){this.item.queues&&this.getShared({endpoint:"shared/queues",key:"queues"}),this.item.teams&&this.getShared({endpoint:"teamlist/allteams",key:"teams"})}},beforeMount:function(){this.selectedDate=this.dateRanges[0],this.item.agents&&this.getShared({endpoint:"shared/agents",key:"agents"}),this.item.callTypes&&this.getShared({endpoint:"shared/calltypes",key:"callTypes"}),this.item.queues&&this.getShared({endpoint:"shared/queues",key:"queues"}),this.item.skills&&this.getShared({endpoint:"shared/skills",key:"skills"}),this.item.teams&&this.getShared({endpoint:"teamlist/allteams",key:"teams"})},created:function(){this.item.queues&&this.getShared({endpoint:"shared/queues",key:"queues"})},methods:Object(n.a)({changeRelative:function(t){this.relativeDate=t},changeDates:function(){this.item.startTime=this.relativeDate?Object(c.a)(this.selectedDate.id,!0,!1):this.$moment(this.selectedStockReport.startTime).format("YYYY-MM-DD HH:mm:ss")||"",this.item.endTime=this.relativeDate?Object(c.a)(this.selectedDate.id,!1,!0):this.$moment(this.selectedStockReport.endTime).format("YYYY-MM-DD HH:mm:ss")},limitText:function(t){return"and ".concat(t,t>1?" other options.":" other option.")}},Object(o.b)({getShared:"shared/getShared"}),{search:function(){var data={url:this.url,key:this.reportName,payload:this.item};this.reportSearch(data)}})},m=r(6),component=Object(m.a)(d,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",[t.item.startTime?r("div",{staticClass:"form-group"},[r("fieldset",{staticClass:"radio"},[r("label",{staticClass:"mr-1"},[r("input",{attrs:{type:"radio",name:"date"},domProps:{checked:!0===t.relativeDate},on:{input:function(e){return t.changeRelative(!0)}}}),t._v("\n        Relative Date Range\n      ")]),t._v(" "),r("label",[r("input",{attrs:{type:"radio",name:"date"},domProps:{checked:!1===t.relativeDate},on:{input:function(e){return t.changeRelative(!1)}}}),t._v("\n        Absolute Date Range\n      ")])])]):t._e(),t._v(" "),t.relativeDate&&t.item.startTime?r("div",{staticClass:"form-group"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedDate,expression:"selectedDate"}],staticClass:"form-control col-xl-6 col-lg-3 col-md-6",on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedDate=e.target.multiple?r:r[0]},t.changeDates]}},t._l(t.dateRanges,function(e){return r("option",{key:e.id,domProps:{value:e}},[t._v("\n        "+t._s(e.name)+"\n      ")])}),0)]):t._e(),t._v(" "),t.relativeDate?t._e():r("div",{staticClass:"form-group"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("label",[t._v("Start Date")]),t._v(" "),r("vue-ctk-date-time-picker",{attrs:{"minute-interval":10,"max-date":t.item.endTime,"auto-close":"","no-header":"",format:"YYYY-MM-DD HH:mm:ss",color:"#727cf5","enable-button-validate":""},model:{value:t.item.startTime,callback:function(e){t.$set(t.item,"startTime",e)},expression:"item.startTime"}})],1),t._v(" "),r("div",{staticClass:"col-md-6"},[r("label",[t._v("End Date")]),t._v(" "),r("vue-ctk-date-time-picker",{attrs:{"minute-interval":10,"min-date":t.item.startTime,"auto-close":"","no-header":"",format:"YYYY-MM-DD HH:mm:ss",color:"#727cf5","enable-button-validate":""},model:{value:t.item.endTime,callback:function(e){t.$set(t.item,"endTime",e)},expression:"item.endTime"}})],1)])]),t._v(" "),t.item.startYear?r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-3"},[r("div",{staticClass:"form-group"},[r("label",[t._v("Start Date")]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.item.startYear,expression:"item.startYear"}],staticClass:"form-control",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.item,"startYear",e.target.multiple?r:r[0])}}},t._l(t.yearRange,function(e){return r("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}),0)])]),t._v(" "),r("div",{staticClass:"col-md-3"},[r("div",{staticClass:"form-group"},[r("label",[t._v("End Date")]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.item.endYear,expression:"item.endYear"}],staticClass:"form-control",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.item,"endYear",e.target.multiple?r:r[0])}}},t._l(t.yearRange,function(e){return r("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}),0)])])]):t._e(),t._v(" "),t.item.callTypes?r("duallist-box",{staticClass:"mb-2",attrs:{"base-list":t.optionsCallTypes.hasFilter.length?t.optionsCallTypes.hasFilter:t.optionsCallTypes.baseList,"selected-list":t.item.callTypes,title:t.optionsCallTypes.title},on:{updateSelected:function(e){t.item.callTypes=e},updateBase:function(e){t.optionsCallTypes.baseList=e}}}):t._e(),t._v(" "),t.item.skills?r("duallist-box",{staticClass:"mb-2",attrs:{"base-list":t.optionsSkills.baseList,"selected-list":t.item.skills,title:t.optionsSkills.title},on:{updateSelected:function(e){t.item.skills=e},updateBase:function(e){t.optionsSkills.baseList=e}}}):t._e(),t._v(" "),t.item.queues?r("duallist-box",{staticClass:"mb-2",attrs:{"base-list":t.optionsQueues.hasFilter.length?t.optionsQueues.hasFilter:t.optionsQueues.baseList,"selected-list":t.item.queues,title:t.optionsQueues.title},on:{updateSelected:function(e){t.item.queues=e},updateBase:function(e){t.optionsQueues.baseList=e}}}):t._e(),t._v(" "),t.item.agents?r("duallist-box",{staticClass:"mb-2",attrs:{"is-agent":!0,"base-list":t.optionsAgents.hasFilter.length?t.optionsAgents.hasFilter:t.optionsAgents.baseList,"selected-list":t.item.agents,title:t.optionsAgents.title},on:{updateSelected:function(e){t.item.agents=e},updateBase:function(e){t.optionsAgents.baseList=e}}}):t._e(),t._v(" "),t.item.teams?r("duallist-box",{staticClass:"mb-2",attrs:{"base-list":t.optionsTeams.hasFilter.length?t.optionsTeams.hasFilter:t.optionsTeams.baseList,"selected-list":t.item.teams,title:t.optionsTeams.title},on:{updateSelected:function(e){t.item.teams=e},updateBase:function(e){t.optionsTeams.baseList=e}}}):t._e(),t._v(" "),t.isVisibleItem.counter?r("div",{staticClass:"form-group"},[r("label",[t._v("Counter")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.item.counter,expression:"item.counter"}],staticClass:"form-control w-50",attrs:{type:"text"},domProps:{value:t.item.counter},on:{input:function(e){e.target.composing||t.$set(t.item,"counter",e.target.value)}}})]):t._e(),t._v(" "),t.isSearchable?r("div",{staticClass:"row modal-footer"},[r("button",{staticClass:"btn btn-primary",on:{click:t.search}},[t._v("Search")])]):t._e(),t._v(" "),t.showFooter?r("div",{staticClass:"row flex"},[r("button",{staticClass:"btn btn-light",on:{click:function(e){return t.$store.commit("shared/setReportFilterModal",!1)}}},[t._v("\n      Cancel\n    ")]),t._v(" "),r("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.$store.commit("shared/setReportFilterModal",!1)}}},[t._v("\n      OK\n    ")])]):t._e()],1)},[],!1,null,null,null);e.a=component.exports},366:function(t,e,r){"use strict";r.r(e);r(52);var n=r(11),o=r(355),l=r(352),c={components:{ReportFilter:o.a},data:function(){return{jsonFields:{Date:"date",Count:"count"},fields:[{key:"date",label:"Date",sortable:!0},{key:"count",label:"Count",sortable:!0}],currentPage:1,perPage:5,sortBy:null,sortDesc:!1,sortDirection:"asc",filter:null,reportData:[],isVisibleItem:{counter:!0},item:{counter:"3",startTime:Object(l.a)(1,!0,!1),endTime:Object(l.a)(1,!1,!0)}}},computed:{pageOptions:function(){return[{text:"5",value:5},{text:"10",value:10},{text:"15",value:15},{text:"20",value:20},{text:"All",value:this.reportData.length}]},totalRows:function(){return this.reportData.length},sortOptions:function(){return this.fields.filter(function(t){return t.sortable}).map(function(t){return{text:t.label,value:t.key}})}},methods:{onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},search:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e,data;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$axios.post("repeatcalls/bydate",this.item);case 3:return e=t.sent,data=e.data,t.next=7,data;case 7:this.reportData=t.sent,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}},t,this,[[0,10]])}));return function(){return t.apply(this,arguments)}}()}},d=r(6),component=Object(d.a)(c,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("report-filter",{directives:[{name:"show",rawName:"v-show",value:!t.reportData.length,expression:"!reportData.length"}],attrs:{"show-footer":!1,"is-searchable":!1,"is-visible-item":t.isVisibleItem,item:t.item}}),t._v(" "),t.reportData.length?t._e():r("div",{staticClass:"form-group"},[r("button",{staticClass:"btn btn-primary",on:{click:t.search}},[t._v("Search")])]),t._v(" "),t.reportData.length?r("button",{staticClass:"btn btn-warning",on:{click:function(e){t.reportData=[]}}},[t._v("\n            Back to Filter\n          ")]):t._e(),t._v(" "),t.reportData.length?r("export-excel",{staticClass:"btn btn-primary",staticStyle:{cursor:"pointer"},attrs:{type:"csv",fields:t.jsonFields,data:t.reportData}},[r("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"icon-excel d-flex",attrs:{title:"Download Excel"}})]):t._e(),t._v(" "),t.reportData.length?r("b-row",[r("b-col",{staticClass:"my-1",attrs:{md:"6"}},[r("b-form-group",{staticClass:"mb-0",attrs:{"label-cols-sm":"3",label:"Filter"}},[r("b-input-group",[r("b-form-input",{attrs:{placeholder:"Type to Search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),r("b-input-group-append",[r("b-button",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("Clear")])],1)],1)],1)],1),t._v(" "),r("b-col",{staticClass:"my-1",attrs:{md:"6"}},[r("b-form-group",{staticClass:"mb-0",attrs:{"label-cols-sm":"3",label:"Sort"}},[r("b-input-group",[r("b-form-select",{attrs:{options:t.sortOptions},model:{value:t.sortBy,callback:function(e){t.sortBy=e},expression:"sortBy"}},[r("option",{attrs:{slot:"first"},domProps:{value:null},slot:"first"},[t._v("-- none --")])]),t._v(" "),r("b-form-select",{attrs:{slot:"append",disabled:!t.sortBy},slot:"append",model:{value:t.sortDesc,callback:function(e){t.sortDesc=e},expression:"sortDesc"}},[r("option",{domProps:{value:!1}},[t._v("Asc")]),t._v(" "),r("option",{domProps:{value:!0}},[t._v("Desc")])])],1)],1)],1),t._v(" "),r("b-col",{staticClass:"my-1",attrs:{md:"6"}},[r("b-form-group",{staticClass:"mb-0",attrs:{"label-cols-sm":"3",label:"Sort direction"}},[r("b-form-select",{model:{value:t.sortDirection,callback:function(e){t.sortDirection=e},expression:"sortDirection"}},[r("option",{attrs:{value:"asc"}},[t._v("Asc")]),t._v(" "),r("option",{attrs:{value:"desc"}},[t._v("Desc")]),t._v(" "),r("option",{attrs:{value:"last"}},[t._v("Last")])])],1)],1),t._v(" "),r("b-col",{staticClass:"my-1",attrs:{md:"6"}},[r("b-form-group",{staticClass:"mb-0",attrs:{"label-cols-sm":"3",label:"Per page"}},[r("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1)],1):t._e(),t._v(" "),t.reportData.length?r("b-table",{attrs:{"show-empty":"",striped:"",hover:"",stacked:"md",items:t.reportData,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered}}):t._e(),t._v(" "),t.reportData.length?r("b-row",[r("b-col",{attrs:{md:"12"}},[r("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"end"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1):t._e()],1)])])])])},[],!1,null,null,null);e.default=component.exports}}]);