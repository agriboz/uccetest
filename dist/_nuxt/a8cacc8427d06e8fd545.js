(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{348:function(t,e,r){"use strict";function n(t,e){if(e){var r=this.$data._chart,n=t.datasets.map(function(t){return t.label}),o=e.datasets.map(function(t){return t.label}),h=JSON.stringify(o);JSON.stringify(n)===h&&e.datasets.length===t.datasets.length?(t.datasets.forEach(function(t,i){var n=Object.keys(e.datasets[i]),o=Object.keys(t),h=n.filter(function(t){return"_meta"!==t&&-1===o.indexOf(t)});for(var l in h.forEach(function(t){delete r.data.datasets[i][t]}),t)t.hasOwnProperty(l)&&(r.data.datasets[i][l]=t[l])}),t.hasOwnProperty("labels")&&(r.data.labels=t.labels,this.$emit("labels:update")),t.hasOwnProperty("xLabels")&&(r.data.xLabels=t.xLabels,this.$emit("xlabels:update")),t.hasOwnProperty("yLabels")&&(r.data.yLabels=t.yLabels,this.$emit("ylabels:update")),r.update(),this.$emit("chart:update")):(r&&(r.destroy(),this.$emit("chart:destroy")),this.renderChart(this.chartData,this.options),this.$emit("chart:render"))}else this.$data._chart&&(this.$data._chart.destroy(),this.$emit("chart:destroy")),this.renderChart(this.chartData,this.options),this.$emit("chart:render")}var o={reactiveData:{data:function(){return{chartData:null}},watch:{chartData:n}},reactiveProp:{props:{chartData:{type:Object,required:!0,default:function(){}}},watch:{chartData:n}}},h=r(350),l=r.n(h);function d(t,e){return{render:function(t){return t("div",{style:this.styles,class:this.cssClasses},[t("canvas",{attrs:{id:this.chartId,width:this.width,height:this.height},ref:"canvas"})])},props:{chartId:{default:t,type:String},width:{default:400,type:Number},height:{default:400,type:Number},cssClasses:{type:String,default:""},styles:{type:Object},plugins:{type:Array,default:function(){return[]}}},data:function(){return{_chart:null,_plugins:this.plugins}},methods:{addPlugin:function(t){this.$data._plugins.push(t)},generateLegend:function(){if(this.$data._chart)return this.$data._chart.generateLegend()},renderChart:function(data,t){this.$data._chart&&this.$data._chart.destroy(),this.$data._chart=new l.a(this.$refs.canvas.getContext("2d"),{type:e,data:data,options:t,plugins:this.$data._plugins})}},beforeDestroy:function(){this.$data._chart&&this.$data._chart.destroy()}}}var c=d("bar-chart","bar"),m=(d("horizontalbar-chart","horizontalBar"),d("doughnut-chart","doughnut"),d("line-chart","line"),d("pie-chart","pie"),d("polar-chart","polarArea"),d("radar-chart","radar"),d("bubble-chart","bubble"),d("scatter-chart","scatter"));r.d(e,"a",function(){return c}),r.d(e,"b",function(){return m}),r.d(e,"c",function(){return o})},349:function(t,e,r){"use strict";var n=r(348),o=n.c.reactiveProp;e.a={extends:n.a,mixins:[o],props:["options"],mounted:function(){this.renderChart(this.chartData,this.options)},watch:{options:{handler:function(){this.renderChart(this.chartData,this.options)},deep:!0}}}},373:function(t,e,r){"use strict";r.r(e);var n=r(0),o=(r(135),r(52),r(11)),h=(r(100),r(10),{components:{BarChart:r(349).a},props:{item:{required:!0,type:Object,default:null},selectedMonthlyDashboard:{required:!0,type:Object,default:null},threshold:{required:!0,type:Object,default:null}},data:function(){return{data:null,openThresholdModal:!1,chartData:null,isChartClicked:0,selectedOption:"week",month:null,week:null,clickedLabel:null,checkOptions:[{text:"Week Level Drilldown",value:"week"},{text:"Day Level Drilldown",value:"day"}]}},computed:{chartTitle:function(){var t=this.selectedMonthlyDashboard.name;return"Monthly Dashboard - ".concat(t," - Time Interval: ").concat(this.$moment(this.item.payload.startTime).format("YYYY-MM-DD")," - ").concat(this.$moment(this.item.payload.endTime).format("YYYY-MM-DD"))},bgColor:function(){var t=this,e=this.selectedMonthlyDashboard.key;return 1===this.threshold.order?this.data.map(function(r){return r[e]>=t.threshold.threshold1?"#29af39":r[e]>=t.threshold.threshold2?"#ff7e30":"#fa4a4a"}):this.data.map(function(r){return r[e]>=t.threshold.threshold1?"#fa4a4a":r[e]>=t.threshold.threshold2?"#ff7e30":"#29af39"})},chartOptions:function(){var t=this;return{responsive:!0,fill:!1,maintainAspectRatio:!1,legend:{display:!1},onClick:this.onClick,tooltips:{callbacks:{label:function(e,data){var r=data.datasets[e.datasetIndex].data[e.index];return[5,6,9,10,11].includes(t.selectedMonthlyDashboard.id)?t.selectedMonthlyDashboard.name+": "+t.$moment.duration(r,"seconds").format("hh:mm:ss",{trim:!1}):[1,2,7,8].includes(t.selectedMonthlyDashboard.id)?"".concat(t.selectedMonthlyDashboard.name,": ").concat(r,"%"):r}}},plugins:{datalabels:{anchor:"end",align:"end",formatter:function(e,r){return[5,6,9,10,11].includes(t.selectedMonthlyDashboard.id)?t.$moment.duration(e,"seconds").format("hh:mm:ss",{trim:!1}):[1,2,7,8].includes(t.selectedMonthlyDashboard.id)?"".concat(e,"%"):void 0},font:{weight:"bold"}}},scales:{xAxes:[{gridLines:{offsetGridLines:!0}}],yAxes:[{position:"bottom",ticks:{beginAtZero:!0}}]},title:{display:!0,text:this.chartTitle}}}},beforeMount:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={start:"YYYY-MM-DD 00:00:00",end:"YYYY-MM-DD 23:59:59"},this.item.payload.startTime=this.$moment(this.item.payload.startTime).format(e.start),this.item.payload.endTime=this.$moment(this.item.payload.endTime).format(e.end),t.next=5,this.search({url:"monthlydashboard",payload:this.item.payload},"month",this.selectedMonthlyDashboard.key);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{filter:function(){this.$emit("filter",!1)},forceRerender:function(){this.reRenderBetterWay+=1,this.chartData.datasets[0].backgroundColor=this.bgColor},downloadAsPng:function(){var t=this.$refs.monthlyChart.$refs.canvas.toDataURL("image/png"),link=document.createElement("a");link.download="image",link.href=t,link.click()},onClick:function(t,e){this.clickedLabel=e[0]._model.label,this.isChartClicked+=1,1===this.isChartClicked&&"week"===this.selectedOption&&(this.month=this.clickedLabel,this.search({url:"monthlydashboard/week",payload:Object(n.a)({},this.item.payload,{month:this.clickedLabel})},"week",this.selectedMonthlyDashboard.key)),1===this.isChartClicked&&"day"===this.selectedOption&&(this.month=this.clickedLabel,this.search({url:"monthlydashboard/monthly-day",payload:Object(n.a)({},this.item.payload,{month:this.clickedLabel})},"day",this.selectedMonthlyDashboard.key)),2===this.isChartClicked&&"week"===this.selectedOption&&(this.week=this.clickedLabel,this.search({url:"monthlydashboard/day",payload:Object(n.a)({},this.item.payload,{week:this.clickedLabel,month:this.month})},"day",this.selectedMonthlyDashboard.key))},search:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(e,label,r){var n,data,o,h=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.post(e.url,e.payload);case 2:return n=t.sent,data=n.data,t.next=6,data;case 6:if(this.data=t.sent,1===this.threshold.order){t.next=13;break}return t.next=10,this.data.map(function(t){return t[r]>=h.threshold.threshold1?"#fa4a4a":t[r]>=h.threshold.threshold2?"#ff7e30":"#29af39"});case 10:t.t0=t.sent,t.next=16;break;case 13:return t.next=15,this.data.map(function(t){return t[r]>=h.threshold.threshold1?"#29af39":t[r]>=h.threshold.threshold2?"#ff7e30":"#fa4a4a"});case 15:t.t0=t.sent;case 16:return o=t.t0,t.next=19,{labels:this.data.map(function(t){return t[label]}),datasets:[{backgroundColor:o,data:this.data.map(function(t){return t[r]})}]};case 19:this.chartData=t.sent;case 20:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}()}}),l=r(6),component=Object(l.a)(h,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",[r("div",{staticClass:"form-group"},[r("button",{staticClass:"btn btn-warning",on:{click:t.filter}},[t._v("Filter")]),t._v(" "),t.item.hasResponse?r("button",{staticClass:"btn btn-primary",on:{click:t.downloadAsPng}},[t._v("\n      Download as PNG\n    ")]):t._e(),t._v(" "),t.chartData?r("button",{staticClass:"btn btn-info",on:{click:function(e){t.openThresholdModal=!t.openThresholdModal}}},[t._v("\n      Change Threshold\n    ")]):t._e(),t._v(" "),1===t.isChartClicked?r("button",{staticClass:"btn btn-info",on:{click:function(e){t.search({url:"monthlydashboard",payload:t.item.payload},"month",t.selectedMonthlyDashboard.key),t.isChartClicked=0}}},[t._v("\n      Back to Monthly\n    ")]):t._e(),t._v(" "),2===t.isChartClicked?r("button",{staticClass:"btn btn-warning",on:{click:function(e){t.search({url:"monthlydashboard/week",payload:Object.assign({},t.item.payload,{month:t.month})},"week",t.selectedMonthlyDashboard.key),t.isChartClicked=1}}},[t._v("\n      Back to Weekly\n    ")]):t._e()]),t._v(" "),r("b-form-group",[r("b-form-radio-group",{attrs:{buttons:"","button-variant":"outline-primary",size:"md",options:t.checkOptions},model:{value:t.selectedOption,callback:function(e){t.selectedOption=e},expression:"selectedOption"}})],1),t._v(" "),r("bar-chart",{key:t.reRenderBetterWay,ref:"monthlyChart",attrs:{"chart-data":t.chartData,options:t.chartOptions}}),t._v(" "),r("b-modal",{attrs:{title:"Change Threshold"},model:{value:t.openThresholdModal,callback:function(e){t.openThresholdModal=e},expression:"openThresholdModal"}},[r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"form-group"},[r("label",[t._v("Threshold 1: (Orange)")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.threshold.threshold1,expression:"threshold.threshold1"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Please enter threshold"},domProps:{value:t.threshold.threshold1},on:{change:t.forceRerender,input:function(e){e.target.composing||t.$set(t.threshold,"threshold1",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",[t._v("Threshold 2: (Red)")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.threshold.threshold2,expression:"threshold.threshold2"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Please enter threshold"},domProps:{value:t.threshold.threshold2},on:{change:t.forceRerender,input:function(e){e.target.composing||t.$set(t.threshold,"threshold2",e.target.value)}}})])])])],1)},[],!1,null,null,null);e.default=component.exports}}]);